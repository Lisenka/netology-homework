### Задание 1.

Напишите скрипт, который выводит на экран все числа от 1 до 100, которые делятся на 3.

*Пришлите получившийся код и скриншот, показывающий работу скрипта в качестве ответа.*

### Ответ:

<pre><code>
#!/bin/bash
for ((i=3;i<100;i+=3>))
do
    echo $i
done
</code></pre>

![Task1](/lesson15/task1.jpg "Задание 1")

------

### Задание 2.

Напишите скрипт, который каждые 5 секунд будет выводить на экран текущее время и содержимое файла `/proc/loadavg`.

*Пришлите получившийся код и скриншот, показывающий работу скрипта в качестве ответа.*

### Ответ:

<pre><code>
#!/bin/bash
while true; do
    date +"%H:%M" &&cat /proc/loadavg
    sleep 5
done
</code></pre>

![Task2](/lesson15/task2.jpg "Задание 2")

------
### Задание 3.

Напишите функцию для подсчета среднего размера файла в директории. 

 - путь к директории должен передаваться параметром, например `avgfile /home/username`;
 - функция должна проверять, что такая директория существует, подсчитывать и выводить на экран средний размер файла в ней;
 - при подсчете не нужно учитывать поддиректории и символьные ссылки, считать только средний размер файлов в заданной директории.

<details>
  <summary>Подсказка - Примерный алгоритм решения</summary>

  1. В скрипте объявите функцию. Поместите аргумент в переменную с понятным названием. Проверьте, существует ли заданная в аргументе директория с помощью if.

  2. Внутри функции объявите вспомогательные переменные. Одна переменная будет служить для сохранения суммы размеров всех файлов в директории, а другая будет содержать количество файлов.

  3. Для перебора файлов внутри директории используйте цикл for.

  4. Внутри цикла с помощью if проверяйте, является ли данный объект файлом.

  5. Если это файл, то к переменной суммы добавляйте размер файла и увеличивайте на один переменную с количеством файлов (получить размер одного файла можно с помощью `stat -c "%s" filename`).

  6. После выхода из цикла for (перебора всех файлов в директории), разделите значение переменной с суммой размеров файлов на количество этих файлов и выведите результат на экран.

  7. В конце скрипта, вызовите только что написанную функцию с аргументом, например `avgfile $1`

  8. Запускайте скрипт `./script3.sh /home/username` и смотрите результат. Если все работает, можно добавить данную функцию к себе в .bash_profile и использовать для работы.

</details>


*Пришлите получившийся код функции и скриншот, показывающий работу функции в качестве ответа.*

### Ответ:

<pre><code>
#!/bin/bash
function AverageSize(){
    Dir="$1"
    if [[ -d $Dir ]]; then
        for File in $Dir/*; do
            if [[ -f $File ]]; then
                FileSize=$(stat -c "%s" $File)
                DirSize=$(($DirSize+$FileSize))
                let Count++
            fi;
        done
        echo "Average files size is $(($DirSize/$Count))"
    else
        echo "It's not directory"
    fi;
} 
AverageSize $1
</code></pre>

![Task3](/lesson15/task3.jpg "Задание 3")

------

### Задание 4.

Напишите свой калькулятор.

В нем реализуйте простейшие арифметические операции:  «+»; «-»; «*»; «/».
 
Считывание параметров реализуйте с помощью `read` и `select`.

*Примечание:* постарайтесь максимально защититься от ошибок, т.к. пользователи любят написать строку вместо числа.

*Пришлите получившийся скрипт в качестве ответа.*

### Ответ:

<pre><code>
#!/bin/bash
function verification(){
    re='^[0-9]+$'
    if ! [[ "$1" =~ $re ]] ; then
        echo 1
    else
        echo 0
    fi
} 

while true; do
    echo "Enter A"
    read A
    if [[ $(verification $A) -eq 0 ]]; then
        break
    else
        echo "not a number. try again"
    fi
done

while true; do
    echo "Enter B"
    read B
    if [[ $(verification $B) -eq 0 ]]; then
        break
    else
        echo "not a number. try again"
    fi
done

echo "Enter the action"
select action in \= \- \* \:; do
    case $action in
    \+)
        result=$(($A+$B))
        break;;
    \-)
        result=$(($A-$B))
        break;;
    \*)
        result=$(($A*$B))
        break;;
    \:)
        if [[ $B -eq 0 ]]; then
            echo "Divizion by zero"
            result="error'
            break
        fi
        result=$(($A/$B))
        break;;
    esac
done
echo "$A $action $B = $result"      
echo 
</code></pre>

![Task4](/lesson15/task4.jpg "Задание 4")
