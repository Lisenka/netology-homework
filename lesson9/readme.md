### Задание 1. 

1. Укажите путь к файлам логов веб-сервера `Nginx`. 
2. Где находится конфигурационный файл, в котором можно посмотреть / поменять эти пути?
3. Какой командой можно воспользоваться для просмотра файла журнала в режиме реального времени?
Попробуйте найти сами, либо воспользуйтесь [ссылкой](https://andreyex.ru/operacionnaya-sistema-linux/nastrojka-zhurnala-oshibok-i-dostupa-nginx/).

*Приведите ответ в свободной форме.*

---

### Ответ:

1. /var/log/nginx
2. /etc/nginx/nginx.conf
3. `tail -f  access.log`

### Задание 2. 

Познакомьтесь со схемой сети.

![](https://i.imgur.com/RefFHYj.png)

1. `COMP1` не может обменяться данными с `COMP4`. Какую последовательность действий вы выберете для того, чтобы локализовать проблему?
2. Возможно ли, чтобы при выполнении `ping 192.168.1.2` с компьютера `COMP5`, `ping` прошёл, а подключение по HTTP с `COMP5` на `COMP1` не проходило бы? Поясните свой  ответ максимально детально.
3. `COMP5` отправляет `ping` на `COMP1` и `COMP2`, при этом `COMP1` на `ping` отвечает, а `COMP2` - нет. 

Приведите максимальное количество причин. Самую простую, но нередко встречающуюся - «У `COMP2` выдернули кабель питания» - я уже ответил за вас.

4. `COMP1` пингует только адреса из подсети `192.168.1.0/24` (`COMP2` и `192.168.1.1`), больше никакие адреса не пингуются. С чем это может быть связано? 

*Приведите ответ в свободной форме.*

### Ответ:
1. 
- Проверить, что кабель не отключен и не поврежден с обеих сторон.
- Проверить, что есть линк, горит лампочка.
- Порты не должны быть заблокированы.
- Не заблокирован ли MAC-адрес на коммутаторе.
- Проверить, видит ли 192.168.1.2 192.168.1.3
- Проверить, видит ли 192.168.1.2 192.168.2.4
- Не блокирует ли доступ firewall.
- Проверить ПО на обеих сторонах.
- Убедиться, что сам канал не загружен.

2. Такое возможно. Если ping проходит, значит связь есть, но могут быть проблемы на уровнях L5-L7. Например, некорректно работает ПО, не запущена служба, служба слушает не порт 8080. 

3. Компьютеры из одной сети, значит проблема связана с конкретным компьютером. Возможно, на нем не настроен шлюз или неверно задан IP. Может быть firewall блокирует подключения.

4. Скорее всего на COMP1 не указан адрес шлюза.

---

### Задание 3. 

Используя схему из Задания 2, попробуйте ответить на вопросы:
1. `COMP1` и `COMP2` оба пингуют `10.1.1.2`, однако не пингуют `192.168.2.1` и прочие адреса из `192.168.2.0/24`. Как вы думаете, что не так и как это можно исправить?
2. Какими способами мы можем сделать так, чтобы `COMP2` не смог общаться ни с кем кроме своей локальной сети? (Приведите вариант с настройками самого `COMP2` и попробуйте придумать, можно ли что-то сделать на маршрутизаторе `192.168.1.1`)
3. Как вы думаете, что будет происходить при попытке провести `ping` с `COMP5` на `192.168.2.3` ?

*Приведите ответ в свободной форме.*

### Ответ:

1. Нужно на 10.1.1.2 настроить NAT.
2. Нужно не указывать адрес шлюза на COMP2 -  в файле `/etc/network/interface` не указывать `gateway`. На маршрутизаторе можно не настраивать NAT.
3. Одновременно оба компьютера с одинаковым ip не могут находиться в одной сети. Если оба компьютера включены, то они будет не видны в сети и ping не пройдет ни к одному.

---

### Задание 4. 

- Сделайте `ping` с одной виртуальной / физической машины на другую.
- Используя [описание утилиты iperf](https://losst.ru/kak-polzovatsya-iperf), загрузите канал между двумя виртуальными машинами на максимум, например, на 60 секунд, в процессе загрузки повторите `ping`.
- Изменились ли цифры в ответе команды `ping`? Почему? Есть ли разница между физическими и виртуальными машинами?

*Приведите скриншоты/ответы команд до и во время высокой загрузки каналов.*

### Ответ:

Две виртуальные машины, на vm1 запущен сервер `iperf`, на vm2 запущен клиент.
`ping` до загрузки канала с vm1 на vm2:

![Task4](/lesson9/task4_1.jpg "Задание 4")

`ping` после загрузки канала:

![Task4](/lesson9/task4_2.jpg "Задание 4")

Цифры изменились. Во второй раз среднее время увеичилось, так как канал стал загружен и пакеты стали дольше проходить.
Думаю, разницы между физическими и виртуальными машинами нет.
