## Задача 1: Обеспечить разработку

Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная поставка. 
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- облачная система;
- система контроля версий Git;
- репозиторий на каждый сервис;
- запуск сборки по событию из системы контроля версий;
- запуск сборки по кнопке с указанием параметров;
- возможность привязать настройки к каждой сборке;
- возможность создания шаблонов для различных конфигураций сборок;
- возможность безопасного хранения секретных данных (пароли, ключи доступа);
- несколько конфигураций для сборки из одного репозитория;
- кастомные шаги при сборке;
- собственные докер-образы для сборки проектов;
- возможность развернуть агентов сборки на собственных серверах;
- возможность параллельного запуска нескольких сборок;
- возможность параллельного запуска тестов.

Обоснуйте свой выбор.

## Ответ:
**Решение на основе GitLab CI/CD**

**Хранение исходного кода:**

* GitLab хранит исходный код в облачных репозиториях Git.
* Каждый сервис имеет отдельный репозиторий.

**Непрерывная интеграция (CI):**

* События push из системы контроля версий запускают сборку.
* Пользователи могут также запускать сборки вручную, нажимая кнопку и указывая параметры.
* Настройки сборки можно привязывать к каждой сборке.

**Непрерывная поставка (CD):**

* GitLab CI/CD позволяет создавать шаблоны для различных конфигураций сборок.
* Секретные данные (пароли, ключи доступа) можно безопасно хранить в GitLab Secrets.
* Поддерживаются различные конфигурации для сборки из одного репозитория.

**Пользовательские шаги и Docker-образы:**

* GitLab CI/CD позволяет добавлять кастомные шаги в процесс сборки.
* Сборку можно выполнять с использованием собственных Docker-образов.

**Масштабируемость и производительность:**

* GitLab предоставляет возможность развертывания агентов сборки на собственных серверах.
* Поддерживается параллельный запуск нескольких сборок и тестов.

**Другие преимущества:**

* Широкое сообщество пользователей и поддержка
* Открытый исходный код и расширяемость
* Поддержка кроссплатформенных сборок
* Интеграция с другими инструментами DevOps (например, Kubernetes, Helm)

**Обоснование:**

GitLab CI/CD соответствует всем требованиям, указанным в задаче. Это полнофункциональная платформа DevOps, которая предоставляет комплексное решение для обеспечения процесса разработки, включая хранение кода, CI и CD. Интуитивно понятный веб-интерфейс и гибкая конфигурация делают GitLab доступным и настраиваемым для команд любого размера.

## Задача 2: Логи

Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- сбор логов в центральное хранилище со всех хостов, обслуживающих систему;
- минимальные требования к приложениям, сбор логов из stdout;
- гарантированная доставка логов до центрального хранилища;
- обеспечение поиска и фильтрации по записям логов;
- обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
- возможность дать ссылку на сохранённый поиск по записям логов.

Обоснуйте свой выбор.

## Ответ:

**Решение:**

**Программные продукты:**

* **Fluentd** - агент сбора логов
* **Elasticsearch** - центральное хранилище и поисковая система
* **Kibana** - пользовательский интерфейс для поиска и фильтрации логов

**Взаимодействие:**

1. **Сбор логов:** Fluentd агенты устанавливаются на всех хостах, где развернуты микросервисы. Они собирают логи из stdout микросервисов и отправляют их в Elasticsearch.
2. **Хранение и поиск:** Elasticsearch сохраняет собранные логи и обеспечивает быстрый и эффективный поиск по ним.
3. **Пользовательский интерфейс:** Kibana подключается к Elasticsearch и предоставляет удобный пользовательский интерфейс для поиска, фильтрации и визуализации логов.

**Обоснование:**

* **Сбор со всех хостов:** Fluentd известен своим легким развертыванием и поддержкой различных форматов логов. Он обеспечивает эффективное и надежное централизованное хранение логов.
* **Минимальные требования к приложениям:** Fluentd поддерживает сбор логов из stdout, не требуя от приложений никаких дополнительных изменений или зависимостей.
* **Гарантированная доставка:** Fluentd использует надежные механизмы доставки для обеспечения передачи логов в Elasticsearch даже в случае сбоев сети.
* **Поиск и фильтрация:** Elasticsearch - мощный механизм поиска, который позволяет эффективно искать и фильтровать записи логов по различным критериям.
* **Пользовательский интерфейс:** Kibana предоставляет интуитивно понятный графический интерфейс, который позволяет разработчикам легко просматривать и анализировать логи, а также создавать и делиться сохраненными поисками.

## Задача 3: Мониторинг

Предложите решение для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- сбор метрик со всех хостов, обслуживающих систему;
- сбор метрик состояния ресурсов хостов: CPU, RAM, HDD, Network;
- сбор метрик потребляемых ресурсов для каждого сервиса: CPU, RAM, HDD, Network;
- сбор метрик, специфичных для каждого сервиса;
- пользовательский интерфейс с возможностью делать запросы и агрегировать информацию;
- пользовательский интерфейс с возможностью настраивать различные панели для отслеживания состояния системы.

Обоснуйте свой выбор.

## Ответ:

**Решение на основе Prometheus, Grafana и Loki**

**Компоненты:**

* **Prometheus:** система мониторинга, отвечающая за сбор метрик.
* **Grafana:** панель инструментов для визуализации и анализа данных мониторинга.
* **Loki:** система хранения и поиска логов.

**Принцип взаимодействия:**

1. **Сбор метрик:**
   - Агенты Prometheus устанавливаются на каждый хост и сервис.
   - Агенты собирают метрики состояния ресурсов хостов (CPU, RAM, HDD, Network) и потребляемых ресурсов сервисов (CPU, RAM, HDD, Network).
   - Специфические для сервиса метрики собираются с помощью пользовательских экспортеров.

2. **Хранение и обработка:**
   - Метрики хранятся в Prometheus.
   - Loki принимает логи от сервисов и хостов.
   - Prometheus обрабатывает метрики и генерирует временные ряды.

3. **Визуализация и анализ:**
   - Grafana подключается к Prometheus и запрашивает данные метрик.
   - Grafana предоставляет пользовательский интерфейс для создания панелей инструментов, которые визуализируют данные и позволяют выполнять запросы.

**Удобные функции:**

* **Пользовательский интерфейс с возможностью делать запросы и агрегировать информацию:** Grafana предоставляет мощный язык запросов, позволяющий пользователям выполнять сложные запросы и агрегировать данные с нескольких источников.
* **Пользовательский интерфейс с возможностью настраивать различные панели для отслеживания состояния системы:** Grafana позволяет создавать и настраивать настраиваемые панели инструментов, отображающие информацию о состоянии системы в наглядном формате.
* **Множество интеграций:** Prometheus, Grafana и Loki имеют многочисленные интеграции с другими инструментами и платформами, что позволяет легко расширять решение мониторинга.

**Обоснование выбора:**

* **Сбор метрик со всех хостов и сервисов:** Prometheus является ведущей системой мониторинга, которая может эффективно собирать метрики с большого количества хостов и сервисов.
* **Сбор метрик состояния ресурсов и потребляемых ресурсов:** Prometheus поддерживает широкий спектр экспортеров для сбора метрик ресурсов.
* **Сбор метрик, специфичных для сервиса:** Пользовательские экспортеры позволяют собирать специфические для сервиса метрики.
* **Пользовательский интерфейс и возможность настраивать панели:** Grafana предлагает мощный пользовательский интерфейс и гибкие возможности настройки.
* **Хранение и индексация логов:** Loki обеспечивает надежное и эффективное хранение и индексацию логов.